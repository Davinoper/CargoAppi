{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _VOverlay = _interopRequireDefault(require(\"../../components/VOverlay\"));\n\nvar _helpers = require(\"../../util/helpers\");\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // Components\n// Utilities\n// Types\n\n/* @vue/component */\n\n\nvar _default = _vue.default.extend().extend({\n  name: 'overlayable',\n  props: {\n    hideOverlay: Boolean,\n    overlayColor: String,\n    overlayOpacity: [Number, String]\n  },\n  data: function data() {\n    return {\n      animationFrame: 0,\n      overlay: null\n    };\n  },\n  watch: {\n    hideOverlay: function hideOverlay(value) {\n      if (!this.isActive) return;\n      if (value) this.removeOverlay();else this.genOverlay();\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.removeOverlay();\n  },\n  methods: {\n    createOverlay: function createOverlay() {\n      var overlay = new _VOverlay.default({\n        propsData: {\n          absolute: this.absolute,\n          value: false,\n          color: this.overlayColor,\n          opacity: this.overlayOpacity\n        }\n      });\n      overlay.$mount();\n      var parent = this.absolute ? this.$el.parentNode : document.querySelector('[data-app]');\n      parent && parent.insertBefore(overlay.$el, parent.firstChild);\n      this.overlay = overlay;\n    },\n    genOverlay: function genOverlay() {\n      var _this = this;\n\n      this.hideScroll();\n      if (this.hideOverlay) return;\n      if (!this.overlay) this.createOverlay();\n      this.animationFrame = requestAnimationFrame(function () {\n        if (!_this.overlay) return;\n\n        if (_this.activeZIndex !== undefined) {\n          _this.overlay.zIndex = String(_this.activeZIndex - 1);\n        } else if (_this.$el) {\n          _this.overlay.zIndex = (0, _helpers.getZIndex)(_this.$el);\n        }\n\n        _this.overlay.value = true;\n      });\n      return true;\n    },\n\n    /** removeOverlay(false) will not restore the scollbar afterwards */\n    removeOverlay: function removeOverlay() {\n      var _this2 = this;\n\n      var showScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (this.overlay) {\n        (0, _helpers.addOnceEventListener)(this.overlay.$el, 'transitionend', function () {\n          if (!_this2.overlay || !_this2.overlay.$el || !_this2.overlay.$el.parentNode || _this2.overlay.value || _this2.isActive) return;\n\n          _this2.overlay.$el.parentNode.removeChild(_this2.overlay.$el);\n\n          _this2.overlay.$destroy();\n\n          _this2.overlay = null;\n        }); // Cancel animation frame in case\n        // overlay is removed before it\n        // has finished its animation\n\n        cancelAnimationFrame(this.animationFrame);\n        this.overlay.value = false;\n      }\n\n      showScroll && this.showScroll();\n    },\n    scrollListener: function scrollListener(e) {\n      if (e.type === 'keydown') {\n        if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName) || // https://github.com/vuetifyjs/vuetify/issues/4715\n        e.target.isContentEditable) return;\n        var up = [_helpers.keyCodes.up, _helpers.keyCodes.pageup];\n        var down = [_helpers.keyCodes.down, _helpers.keyCodes.pagedown];\n\n        if (up.includes(e.keyCode)) {\n          e.deltaY = -1;\n        } else if (down.includes(e.keyCode)) {\n          e.deltaY = 1;\n        } else {\n          return;\n        }\n      }\n\n      if (e.target === this.overlay || e.type !== 'keydown' && e.target === document.body || this.checkPath(e)) e.preventDefault();\n    },\n    hasScrollbar: function hasScrollbar(el) {\n      if (!el || el.nodeType !== Node.ELEMENT_NODE) return false;\n      var style = window.getComputedStyle(el);\n      return (['auto', 'scroll'].includes(style.overflowY) || el.tagName === 'SELECT') && el.scrollHeight > el.clientHeight || ['auto', 'scroll'].includes(style.overflowX) && el.scrollWidth > el.clientWidth;\n    },\n    shouldScroll: function shouldScroll(el, e) {\n      if (el.hasAttribute('data-app')) return false;\n      var dir = e.shiftKey || e.deltaX ? 'x' : 'y';\n      var delta = dir === 'y' ? e.deltaY : e.deltaX || e.deltaY;\n      var alreadyAtStart;\n      var alreadyAtEnd;\n\n      if (dir === 'y') {\n        alreadyAtStart = el.scrollTop === 0;\n        alreadyAtEnd = el.scrollTop + el.clientHeight === el.scrollHeight;\n      } else {\n        alreadyAtStart = el.scrollLeft === 0;\n        alreadyAtEnd = el.scrollLeft + el.clientWidth === el.scrollWidth;\n      }\n\n      var scrollingUp = delta < 0;\n      var scrollingDown = delta > 0;\n      if (!alreadyAtStart && scrollingUp) return true;\n      if (!alreadyAtEnd && scrollingDown) return true;\n\n      if (alreadyAtStart || alreadyAtEnd) {\n        return this.shouldScroll(el.parentNode, e);\n      }\n\n      return false;\n    },\n    isInside: function isInside(el, parent) {\n      if (el === parent) {\n        return true;\n      } else if (el === null || el === document.body) {\n        return false;\n      } else {\n        return this.isInside(el.parentNode, parent);\n      }\n    },\n    checkPath: function checkPath(e) {\n      var path = (0, _helpers.composedPath)(e);\n\n      if (e.type === 'keydown' && path[0] === document.body) {\n        var dialog = this.$refs.dialog; // getSelection returns null in firefox in some edge cases, can be ignored\n\n        var selected = window.getSelection().anchorNode;\n\n        if (dialog && this.hasScrollbar(dialog) && this.isInside(selected, dialog)) {\n          return !this.shouldScroll(dialog, e);\n        }\n\n        return true;\n      }\n\n      for (var index = 0; index < path.length; index++) {\n        var el = path[index];\n        if (el === document) return true;\n        if (el === document.documentElement) return true;\n        if (el === this.$refs.content) return true;\n        if (this.hasScrollbar(el)) return !this.shouldScroll(el, e);\n      }\n\n      return true;\n    },\n    hideScroll: function hideScroll() {\n      if (this.$vuetify.breakpoint.smAndDown) {\n        document.documentElement.classList.add('overflow-y-hidden');\n      } else {\n        (0, _helpers.addPassiveEventListener)(window, 'wheel', this.scrollListener, {\n          passive: false\n        });\n        window.addEventListener('keydown', this.scrollListener);\n      }\n    },\n    showScroll: function showScroll() {\n      document.documentElement.classList.remove('overflow-y-hidden');\n      window.removeEventListener('wheel', this.scrollListener);\n      window.removeEventListener('keydown', this.scrollListener);\n    }\n  }\n});\n\nexports.default = _default;","map":{"version":3,"mappings":";;;;;;;;;;;;;AACA;;AAGA;;AASA;;;;;;EAbA;AAGA;AASA;;AAmBA;;;eACeA,aAAIC,MAAJ,GAAqDA,MAArD,CAA4D;EACzEC,IAAI,EAAE,aADmE;EAGzEC,KAAK,EAAE;IACLC,WAAW,EAAEC,OADR;IAELC,YAAY,EAAEC,MAFT;IAGLC,cAAc,EAAE,CAACC,MAAD,EAASF,MAAT;EAHX,CAHkE;EASzEG,IATyE,kBASrE;IACF,OAAO;MACLC,cAAc,EAAE,CADX;MAELC,OAAO,EAAE;IAFJ,CAAP;EAVuE;EAgBzEC,KAAK,EAAE;IACLT,WADK,uBACQU,KADR,EACa;MAChB,IAAI,CAAC,KAAKC,QAAV,EAAoB;MAEpB,IAAID,KAAJ,EAAW,KAAKE,aAAL,GAAX,KACK,KAAKC,UAAL;IACN;EANI,CAhBkE;EAyBzEC,aAzByE,2BAyB5D;IACX,KAAKF,aAAL;EA1BuE;EA6BzEG,OAAO,EAAE;IACPC,aADO,2BACM;MACX,IAAMR,OAAO,GAAG,IAAIS,iBAAJ,CAAa;QAC3BC,SAAS,EAAE;UACTC,QAAQ,EAAE,KAAKA,QADN;UAETT,KAAK,EAAE,KAFE;UAGTU,KAAK,EAAE,KAAKlB,YAHH;UAITmB,OAAO,EAAE,KAAKjB;QAJL;MADgB,CAAb,CAAhB;MASAI,OAAO,CAACc,MAAR;MAEA,IAAMC,MAAM,GAAG,KAAKJ,QAAL,GACX,KAAKK,GAAL,CAASC,UADE,GAEXC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAFJ;MAIAJ,MAAM,IAAIA,MAAM,CAACK,YAAP,CAAoBpB,OAAO,CAACgB,GAA5B,EAAiCD,MAAM,CAACM,UAAxC,CAAV;MAEA,KAAKrB,OAAL,GAAeA,OAAf;IAnBK;IAqBPK,UArBO,wBAqBG;MAAA;;MACR,KAAKiB,UAAL;MAEA,IAAI,KAAK9B,WAAT,EAAsB;MAEtB,IAAI,CAAC,KAAKQ,OAAV,EAAmB,KAAKQ,aAAL;MAEnB,KAAKT,cAAL,GAAsBwB,qBAAqB,CAAC,YAAK;QAC/C,IAAI,CAACC,KAAI,CAACxB,OAAV,EAAmB;;QAEnB,IAAIwB,KAAI,CAACC,YAAL,KAAsBC,SAA1B,EAAqC;UACnCF,KAAI,CAACxB,OAAL,CAAa2B,MAAb,GAAsBhC,MAAM,CAAC6B,KAAI,CAACC,YAAL,GAAoB,CAArB,CAA5B;QADF,OAEO,IAAID,KAAI,CAACR,GAAT,EAAc;UACnBQ,KAAI,CAACxB,OAAL,CAAa2B,MAAb,GAAsB,wBAAUH,KAAI,CAACR,GAAf,CAAtB;QACD;;QAEDQ,KAAI,CAACxB,OAAL,CAAaE,KAAb,GAAqB,IAArB;MATyC,EAA3C;MAYA,OAAO,IAAP;IAxCK;;IA0CP;IACAE,aA3CO,2BA2CyB;MAAA;;MAAA,IAAjBwB,UAAiB,uEAAJ,IAAI;;MAC9B,IAAI,KAAK5B,OAAT,EAAkB;QAChB,mCAAqB,KAAKA,OAAL,CAAagB,GAAlC,EAAuC,eAAvC,EAAwD,YAAK;UAC3D,IACE,CAACa,MAAI,CAAC7B,OAAN,IACA,CAAC6B,MAAI,CAAC7B,OAAL,CAAagB,GADd,IAEA,CAACa,MAAI,CAAC7B,OAAL,CAAagB,GAAb,CAAiBC,UAFlB,IAGAY,MAAI,CAAC7B,OAAL,CAAaE,KAHb,IAIA2B,MAAI,CAAC1B,QALP,EAME;;UAEF0B,MAAI,CAAC7B,OAAL,CAAagB,GAAb,CAAiBC,UAAjB,CAA4Ba,WAA5B,CAAwCD,MAAI,CAAC7B,OAAL,CAAagB,GAArD;;UACAa,MAAI,CAAC7B,OAAL,CAAa+B,QAAb;;UACAF,MAAI,CAAC7B,OAAL,GAAe,IAAf;QAXF,GADgB,CAehB;QACA;QACA;;QACAgC,oBAAoB,CAAC,KAAKjC,cAAN,CAApB;QAEA,KAAKC,OAAL,CAAaE,KAAb,GAAqB,KAArB;MACD;;MAED0B,UAAU,IAAI,KAAKA,UAAL,EAAd;IAnEK;IAqEPK,cArEO,0BAqESC,CArET,EAqEsC;MAC3C,IAAIA,CAAC,CAACC,IAAF,KAAW,SAAf,EAA0B;QACxB,IACE,CAAC,OAAD,EAAU,UAAV,EAAsB,QAAtB,EAAgCC,QAAhC,CAA0CF,CAAC,CAACG,MAAF,CAAqBC,OAA/D,KACA;QACCJ,CAAC,CAACG,MAAF,CAAyBE,iBAH5B,EAIE;QAEF,IAAMC,EAAE,GAAG,CAACC,kBAASD,EAAV,EAAcC,kBAASC,MAAvB,CAAX;QACA,IAAMC,IAAI,GAAG,CAACF,kBAASE,IAAV,EAAgBF,kBAASG,QAAzB,CAAb;;QAEA,IAAIJ,EAAE,CAACJ,QAAH,CAAYF,CAAC,CAACW,OAAd,CAAJ,EAA4B;UACzBX,CAAS,CAACY,MAAV,GAAmB,CAAC,CAApB;QADH,OAEO,IAAIH,IAAI,CAACP,QAAL,CAAcF,CAAC,CAACW,OAAhB,CAAJ,EAA8B;UAClCX,CAAS,CAACY,MAAV,GAAmB,CAAnB;QADI,OAEA;UACL;QACD;MACF;;MAED,IAAIZ,CAAC,CAACG,MAAF,KAAa,KAAKrC,OAAlB,IACDkC,CAAC,CAACC,IAAF,KAAW,SAAX,IAAwBD,CAAC,CAACG,MAAF,KAAanB,QAAQ,CAAC6B,IAD7C,IAEF,KAAKC,SAAL,CAAed,CAAf,CAFF,EAEqBA,CAAC,CAACe,cAAF;IA3FhB;IA6FPC,YA7FO,wBA6FOC,EA7FP,EA6FmB;MACxB,IAAI,CAACA,EAAD,IAAOA,EAAE,CAACC,QAAH,KAAgBC,IAAI,CAACC,YAAhC,EAA8C,OAAO,KAAP;MAE9C,IAAMC,KAAK,GAAGC,MAAM,CAACC,gBAAP,CAAwBN,EAAxB,CAAd;MACA,OAAQ,CAAC,CAAC,MAAD,EAAS,QAAT,EAAmBf,QAAnB,CAA4BmB,KAAK,CAACG,SAAlC,KAAiDP,EAAE,CAACb,OAAH,KAAe,QAAjE,KAA8Ea,EAAE,CAACQ,YAAH,GAAkBR,EAAE,CAACS,YAAnG,IACN,CAAC,MAAD,EAAS,QAAT,EAAmBxB,QAAnB,CAA4BmB,KAAK,CAACM,SAAlC,KAAkDV,EAAE,CAACW,WAAH,GAAiBX,EAAE,CAACY,WADxE;IAjGK;IAoGPC,YApGO,wBAoGOb,EApGP,EAoGoBjB,CApGpB,EAoGiC;MACtC,IAAIiB,EAAE,CAACc,YAAH,CAAgB,UAAhB,CAAJ,EAAiC,OAAO,KAAP;MAEjC,IAAMC,GAAG,GAAGhC,CAAC,CAACiC,QAAF,IAAcjC,CAAC,CAACkC,MAAhB,GAAyB,GAAzB,GAA+B,GAA3C;MACA,IAAMC,KAAK,GAAGH,GAAG,KAAK,GAAR,GAAchC,CAAC,CAACY,MAAhB,GAAyBZ,CAAC,CAACkC,MAAF,IAAYlC,CAAC,CAACY,MAArD;MAEA,IAAIwB,cAAJ;MACA,IAAIC,YAAJ;;MACA,IAAIL,GAAG,KAAK,GAAZ,EAAiB;QACfI,cAAc,GAAGnB,EAAE,CAACqB,SAAH,KAAiB,CAAlC;QACAD,YAAY,GAAGpB,EAAE,CAACqB,SAAH,GAAerB,EAAE,CAACS,YAAlB,KAAmCT,EAAE,CAACQ,YAArD;MAFF,OAGO;QACLW,cAAc,GAAGnB,EAAE,CAACsB,UAAH,KAAkB,CAAnC;QACAF,YAAY,GAAGpB,EAAE,CAACsB,UAAH,GAAgBtB,EAAE,CAACY,WAAnB,KAAmCZ,EAAE,CAACW,WAArD;MACD;;MAED,IAAMY,WAAW,GAAGL,KAAK,GAAG,CAA5B;MACA,IAAMM,aAAa,GAAGN,KAAK,GAAG,CAA9B;MAEA,IAAI,CAACC,cAAD,IAAmBI,WAAvB,EAAoC,OAAO,IAAP;MACpC,IAAI,CAACH,YAAD,IAAiBI,aAArB,EAAoC,OAAO,IAAP;;MACpC,IAAKL,cAAc,IAAIC,YAAvB,EAAsC;QACpC,OAAO,KAAKP,YAAL,CAAkBb,EAAE,CAAClC,UAArB,EAA4CiB,CAA5C,CAAP;MACD;;MAED,OAAO,KAAP;IA7HK;IA+HP0C,QA/HO,oBA+HGzB,EA/HH,EA+HgBpC,MA/HhB,EA+H+B;MACpC,IAAIoC,EAAE,KAAKpC,MAAX,EAAmB;QACjB,OAAO,IAAP;MADF,OAEO,IAAIoC,EAAE,KAAK,IAAP,IAAeA,EAAE,KAAKjC,QAAQ,CAAC6B,IAAnC,EAAyC;QAC9C,OAAO,KAAP;MADK,OAEA;QACL,OAAO,KAAK6B,QAAL,CAAczB,EAAE,CAAClC,UAAjB,EAAwCF,MAAxC,CAAP;MACD;IAtII;IAwIPiC,SAxIO,qBAwIId,CAxIJ,EAwIiB;MACtB,IAAM2C,IAAI,GAAG,2BAAa3C,CAAb,CAAb;;MAEA,IAAIA,CAAC,CAACC,IAAF,KAAW,SAAX,IAAwB0C,IAAI,CAAC,CAAD,CAAJ,KAAY3D,QAAQ,CAAC6B,IAAjD,EAAuD;QACrD,IAAM+B,MAAM,GAAG,KAAKC,KAAL,CAAWD,MAA1B,CADqD,CAErD;;QACA,IAAME,QAAQ,GAAGxB,MAAM,CAACyB,YAAP,GAAuBC,UAAxC;;QACA,IAAIJ,MAAM,IAAI,KAAK5B,YAAL,CAAkB4B,MAAlB,CAAV,IAAuC,KAAKF,QAAL,CAAcI,QAAd,EAAwBF,MAAxB,CAA3C,EAA4E;UAC1E,OAAO,CAAC,KAAKd,YAAL,CAAkBc,MAAlB,EAA0B5C,CAA1B,CAAR;QACD;;QACD,OAAO,IAAP;MACD;;MAED,KAAK,IAAIiD,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGN,IAAI,CAACO,MAAjC,EAAyCD,KAAK,EAA9C,EAAkD;QAChD,IAAMhC,EAAE,GAAG0B,IAAI,CAACM,KAAD,CAAf;QAEA,IAAIhC,EAAE,KAAKjC,QAAX,EAAqB,OAAO,IAAP;QACrB,IAAIiC,EAAE,KAAKjC,QAAQ,CAACmE,eAApB,EAAqC,OAAO,IAAP;QACrC,IAAIlC,EAAE,KAAK,KAAK4B,KAAL,CAAWO,OAAtB,EAA+B,OAAO,IAAP;QAE/B,IAAI,KAAKpC,YAAL,CAAkBC,EAAlB,CAAJ,EAAsC,OAAO,CAAC,KAAKa,YAAL,CAAkBb,EAAlB,EAAiCjB,CAAjC,CAAR;MACvC;;MAED,OAAO,IAAP;IA/JK;IAiKPZ,UAjKO,wBAiKG;MACR,IAAI,KAAKiE,QAAL,CAAcC,UAAd,CAAyBC,SAA7B,EAAwC;QACtCvE,QAAQ,CAACmE,eAAT,CAA0BK,SAA1B,CAAoCC,GAApC,CAAwC,mBAAxC;MADF,OAEO;QACL,sCAAwBnC,MAAxB,EAAgC,OAAhC,EAAyC,KAAKvB,cAA9C,EAAqF;UAAE2D,OAAO,EAAE;QAAX,CAArF;QACApC,MAAM,CAACqC,gBAAP,CAAwB,SAAxB,EAAmC,KAAK5D,cAAxC;MACD;IAvKI;IAyKPL,UAzKO,wBAyKG;MACRV,QAAQ,CAACmE,eAAT,CAA0BK,SAA1B,CAAoCI,MAApC,CAA2C,mBAA3C;MACAtC,MAAM,CAACuC,mBAAP,CAA2B,OAA3B,EAAoC,KAAK9D,cAAzC;MACAuB,MAAM,CAACuC,mBAAP,CAA2B,SAA3B,EAAsC,KAAK9D,cAA3C;IACD;EA7KM;AA7BgE,CAA5D","names":["_vue","extend","name","props","hideOverlay","Boolean","overlayColor","String","overlayOpacity","Number","data","animationFrame","overlay","watch","value","isActive","removeOverlay","genOverlay","beforeDestroy","methods","createOverlay","_VOverlay","propsData","absolute","color","opacity","$mount","parent","$el","parentNode","document","querySelector","insertBefore","firstChild","hideScroll","requestAnimationFrame","_this","activeZIndex","undefined","zIndex","showScroll","_this2","removeChild","$destroy","cancelAnimationFrame","scrollListener","e","type","includes","target","tagName","isContentEditable","up","_helpers","pageup","down","pagedown","keyCode","deltaY","body","checkPath","preventDefault","hasScrollbar","el","nodeType","Node","ELEMENT_NODE","style","window","getComputedStyle","overflowY","scrollHeight","clientHeight","overflowX","scrollWidth","clientWidth","shouldScroll","hasAttribute","dir","shiftKey","deltaX","delta","alreadyAtStart","alreadyAtEnd","scrollTop","scrollLeft","scrollingUp","scrollingDown","isInside","path","dialog","$refs","selected","getSelection","anchorNode","index","length","documentElement","content","$vuetify","breakpoint","smAndDown","classList","add","passive","addEventListener","remove","removeEventListener"],"sourceRoot":"","sources":["../../../src/mixins/overlayable/index.ts"],"sourcesContent":["// Components\nimport VOverlay from '../../components/VOverlay'\n\n// Utilities\nimport {\n  keyCodes,\n  addOnceEventListener,\n  addPassiveEventListener,\n  getZIndex,\n  composedPath,\n} from '../../util/helpers'\n\n// Types\nimport Vue from 'vue'\n\ninterface Toggleable extends Vue {\n  isActive?: boolean\n}\n\ninterface Stackable extends Vue {\n  activeZIndex: number\n}\n\ninterface options {\n  absolute?: boolean\n  $refs: {\n    dialog?: HTMLElement\n    content?: HTMLElement\n  }\n}\n\n/* @vue/component */\nexport default Vue.extend<Vue & Toggleable & Stackable & options>().extend({\n  name: 'overlayable',\n\n  props: {\n    hideOverlay: Boolean,\n    overlayColor: String,\n    overlayOpacity: [Number, String],\n  },\n\n  data () {\n    return {\n      animationFrame: 0,\n      overlay: null as InstanceType<typeof VOverlay> | null,\n    }\n  },\n\n  watch: {\n    hideOverlay (value) {\n      if (!this.isActive) return\n\n      if (value) this.removeOverlay()\n      else this.genOverlay()\n    },\n  },\n\n  beforeDestroy () {\n    this.removeOverlay()\n  },\n\n  methods: {\n    createOverlay () {\n      const overlay = new VOverlay({\n        propsData: {\n          absolute: this.absolute,\n          value: false,\n          color: this.overlayColor,\n          opacity: this.overlayOpacity,\n        },\n      })\n\n      overlay.$mount()\n\n      const parent = this.absolute\n        ? this.$el.parentNode\n        : document.querySelector('[data-app]')\n\n      parent && parent.insertBefore(overlay.$el, parent.firstChild)\n\n      this.overlay = overlay\n    },\n    genOverlay () {\n      this.hideScroll()\n\n      if (this.hideOverlay) return\n\n      if (!this.overlay) this.createOverlay()\n\n      this.animationFrame = requestAnimationFrame(() => {\n        if (!this.overlay) return\n\n        if (this.activeZIndex !== undefined) {\n          this.overlay.zIndex = String(this.activeZIndex - 1)\n        } else if (this.$el) {\n          this.overlay.zIndex = getZIndex(this.$el)\n        }\n\n        this.overlay.value = true\n      })\n\n      return true\n    },\n    /** removeOverlay(false) will not restore the scollbar afterwards */\n    removeOverlay (showScroll = true) {\n      if (this.overlay) {\n        addOnceEventListener(this.overlay.$el, 'transitionend', () => {\n          if (\n            !this.overlay ||\n            !this.overlay.$el ||\n            !this.overlay.$el.parentNode ||\n            this.overlay.value ||\n            this.isActive\n          ) return\n\n          this.overlay.$el.parentNode.removeChild(this.overlay.$el)\n          this.overlay.$destroy()\n          this.overlay = null\n        })\n\n        // Cancel animation frame in case\n        // overlay is removed before it\n        // has finished its animation\n        cancelAnimationFrame(this.animationFrame)\n\n        this.overlay.value = false\n      }\n\n      showScroll && this.showScroll()\n    },\n    scrollListener (e: WheelEvent & KeyboardEvent) {\n      if (e.type === 'keydown') {\n        if (\n          ['INPUT', 'TEXTAREA', 'SELECT'].includes((e.target as Element).tagName) ||\n          // https://github.com/vuetifyjs/vuetify/issues/4715\n          (e.target as HTMLElement).isContentEditable\n        ) return\n\n        const up = [keyCodes.up, keyCodes.pageup]\n        const down = [keyCodes.down, keyCodes.pagedown]\n\n        if (up.includes(e.keyCode)) {\n          (e as any).deltaY = -1\n        } else if (down.includes(e.keyCode)) {\n          (e as any).deltaY = 1\n        } else {\n          return\n        }\n      }\n\n      if (e.target === this.overlay ||\n        (e.type !== 'keydown' && e.target === document.body) ||\n        this.checkPath(e)) e.preventDefault()\n    },\n    hasScrollbar (el?: Element) {\n      if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\n\n      const style = window.getComputedStyle(el)\n      return ((['auto', 'scroll'].includes(style.overflowY!) || el.tagName === 'SELECT') && el.scrollHeight > el.clientHeight) ||\n      ((['auto', 'scroll'].includes(style.overflowX!)) && el.scrollWidth > el.clientWidth)\n    },\n    shouldScroll (el: Element, e: WheelEvent): boolean {\n      if (el.hasAttribute('data-app')) return false\n\n      const dir = e.shiftKey || e.deltaX ? 'x' : 'y'\n      const delta = dir === 'y' ? e.deltaY : e.deltaX || e.deltaY\n\n      let alreadyAtStart: boolean\n      let alreadyAtEnd: boolean\n      if (dir === 'y') {\n        alreadyAtStart = el.scrollTop === 0\n        alreadyAtEnd = el.scrollTop + el.clientHeight === el.scrollHeight\n      } else {\n        alreadyAtStart = el.scrollLeft === 0\n        alreadyAtEnd = el.scrollLeft + el.clientWidth === el.scrollWidth\n      }\n\n      const scrollingUp = delta < 0\n      const scrollingDown = delta > 0\n\n      if (!alreadyAtStart && scrollingUp) return true\n      if (!alreadyAtEnd && scrollingDown) return true\n      if ((alreadyAtStart || alreadyAtEnd)) {\n        return this.shouldScroll(el.parentNode as Element, e)\n      }\n\n      return false\n    },\n    isInside (el: Element, parent: Element): boolean {\n      if (el === parent) {\n        return true\n      } else if (el === null || el === document.body) {\n        return false\n      } else {\n        return this.isInside(el.parentNode as Element, parent)\n      }\n    },\n    checkPath (e: WheelEvent) {\n      const path = composedPath(e)\n\n      if (e.type === 'keydown' && path[0] === document.body) {\n        const dialog = this.$refs.dialog\n        // getSelection returns null in firefox in some edge cases, can be ignored\n        const selected = window.getSelection()!.anchorNode as Element\n        if (dialog && this.hasScrollbar(dialog) && this.isInside(selected, dialog)) {\n          return !this.shouldScroll(dialog, e)\n        }\n        return true\n      }\n\n      for (let index = 0; index < path.length; index++) {\n        const el = path[index]\n\n        if (el === document) return true\n        if (el === document.documentElement) return true\n        if (el === this.$refs.content) return true\n\n        if (this.hasScrollbar(el as Element)) return !this.shouldScroll(el as Element, e)\n      }\n\n      return true\n    },\n    hideScroll () {\n      if (this.$vuetify.breakpoint.smAndDown) {\n        document.documentElement!.classList.add('overflow-y-hidden')\n      } else {\n        addPassiveEventListener(window, 'wheel', this.scrollListener as EventHandlerNonNull, { passive: false })\n        window.addEventListener('keydown', this.scrollListener as EventHandlerNonNull)\n      }\n    },\n    showScroll () {\n      document.documentElement!.classList.remove('overflow-y-hidden')\n      window.removeEventListener('wheel', this.scrollListener as EventHandlerNonNull)\n      window.removeEventListener('keydown', this.scrollListener as EventHandlerNonNull)\n    },\n  },\n})\n"]},"metadata":{},"sourceType":"script"}