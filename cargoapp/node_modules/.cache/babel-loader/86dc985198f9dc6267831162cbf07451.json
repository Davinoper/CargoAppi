{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _calendarWithEvents = _interopRequireDefault(require(\"./mixins/calendar-with-events\"));\n\nvar _props = _interopRequireDefault(require(\"./util/props\"));\n\nvar _timestamp = require(\"./util/timestamp\");\n\nvar _VCalendarMonthly = _interopRequireDefault(require(\"./VCalendarMonthly\"));\n\nvar _VCalendarDaily = _interopRequireDefault(require(\"./VCalendarDaily\"));\n\nvar _VCalendarWeekly = _interopRequireDefault(require(\"./VCalendarWeekly\"));\n\nvar _VCalendarCategory = _interopRequireDefault(require(\"./VCalendarCategory\"));\n\nvar _parser = require(\"./util/parser\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* @vue/component */\n\n\nvar _default = _calendarWithEvents.default.extend({\n  name: 'v-calendar',\n  props: _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, _props.default.calendar), _props.default.weeks), _props.default.intervals), _props.default.category),\n  data: function data() {\n    return {\n      lastStart: null,\n      lastEnd: null\n    };\n  },\n  computed: {\n    parsedValue: function parsedValue() {\n      return (0, _timestamp.validateTimestamp)(this.value) ? (0, _timestamp.parseTimestamp)(this.value, true) : this.parsedStart || this.times.today;\n    },\n    parsedCategoryDays: function parsedCategoryDays() {\n      return parseInt(this.categoryDays) || 1;\n    },\n    renderProps: function renderProps() {\n      var around = this.parsedValue;\n      var component = null;\n      var maxDays = this.maxDays;\n      var weekdays = this.parsedWeekdays;\n      var categories = this.parsedCategories;\n      var start = around;\n      var end = around;\n\n      switch (this.type) {\n        case 'month':\n          component = _VCalendarMonthly.default;\n          start = (0, _timestamp.getStartOfMonth)(around);\n          end = (0, _timestamp.getEndOfMonth)(around);\n          break;\n\n        case 'week':\n          component = _VCalendarDaily.default;\n          start = this.getStartOfWeek(around);\n          end = this.getEndOfWeek(around);\n          maxDays = 7;\n          break;\n\n        case 'day':\n          component = _VCalendarDaily.default;\n          maxDays = 1;\n          weekdays = [start.weekday];\n          break;\n\n        case '4day':\n          component = _VCalendarDaily.default;\n          end = (0, _timestamp.relativeDays)((0, _timestamp.copyTimestamp)(end), _timestamp.nextDay, 3);\n          (0, _timestamp.updateFormatted)(end);\n          maxDays = 4;\n          weekdays = [start.weekday, (start.weekday + 1) % 7, (start.weekday + 2) % 7, (start.weekday + 3) % 7];\n          break;\n\n        case 'custom-weekly':\n          component = _VCalendarWeekly.default;\n          start = this.parsedStart || around;\n          end = this.parsedEnd;\n          break;\n\n        case 'custom-daily':\n          component = _VCalendarDaily.default;\n          start = this.parsedStart || around;\n          end = this.parsedEnd;\n          break;\n\n        case 'category':\n          var days = this.parsedCategoryDays;\n          component = _VCalendarCategory.default;\n          end = (0, _timestamp.relativeDays)((0, _timestamp.copyTimestamp)(end), _timestamp.nextDay, days);\n          (0, _timestamp.updateFormatted)(end);\n          maxDays = days;\n          weekdays = [];\n\n          for (var i = 0; i < days; i++) {\n            weekdays.push((start.weekday + i) % 7);\n          }\n\n          categories = this.getCategoryList(categories);\n          break;\n\n        default:\n          throw new Error(this.type + ' is not a valid Calendar type');\n      }\n\n      return {\n        component: component,\n        start: start,\n        end: end,\n        maxDays: maxDays,\n        weekdays: weekdays,\n        categories: categories\n      };\n    },\n    eventWeekdays: function eventWeekdays() {\n      return this.renderProps.weekdays;\n    },\n    categoryMode: function categoryMode() {\n      return this.type === 'category';\n    },\n    title: function title() {\n      var _this$renderProps = this.renderProps,\n          start = _this$renderProps.start,\n          end = _this$renderProps.end;\n      var spanYears = start.year !== end.year;\n      var spanMonths = spanYears || start.month !== end.month;\n\n      if (spanYears) {\n        return this.monthShortFormatter(start, true) + ' ' + start.year + ' - ' + this.monthShortFormatter(end, true) + ' ' + end.year;\n      }\n\n      if (spanMonths) {\n        return this.monthShortFormatter(start, true) + ' - ' + this.monthShortFormatter(end, true) + ' ' + end.year;\n      } else {\n        return this.monthLongFormatter(start, false) + ' ' + start.year;\n      }\n    },\n    monthLongFormatter: function monthLongFormatter() {\n      return this.getFormatter({\n        timeZone: 'UTC',\n        month: 'long'\n      });\n    },\n    monthShortFormatter: function monthShortFormatter() {\n      return this.getFormatter({\n        timeZone: 'UTC',\n        month: 'short'\n      });\n    },\n    parsedCategories: function parsedCategories() {\n      return (0, _parser.getParsedCategories)(this.categories, this.categoryText);\n    }\n  },\n  watch: {\n    renderProps: 'checkChange'\n  },\n  mounted: function mounted() {\n    this.updateEventVisibility();\n    this.checkChange();\n  },\n  updated: function updated() {\n    window.requestAnimationFrame(this.updateEventVisibility);\n  },\n  methods: {\n    checkChange: function checkChange() {\n      var lastStart = this.lastStart,\n          lastEnd = this.lastEnd;\n      var _this$renderProps2 = this.renderProps,\n          start = _this$renderProps2.start,\n          end = _this$renderProps2.end;\n\n      if (!lastStart || !lastEnd || start.date !== lastStart.date || end.date !== lastEnd.date) {\n        this.lastStart = start;\n        this.lastEnd = end;\n        this.$emit('change', {\n          start: start,\n          end: end\n        });\n      }\n    },\n    move: function move() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var moved = (0, _timestamp.copyTimestamp)(this.parsedValue);\n      var forward = amount > 0;\n      var mover = forward ? _timestamp.nextDay : _timestamp.prevDay;\n      var limit = forward ? _timestamp.DAYS_IN_MONTH_MAX : _timestamp.DAY_MIN;\n      var times = forward ? amount : -amount;\n\n      while (--times >= 0) {\n        switch (this.type) {\n          case 'month':\n            moved.day = limit;\n            mover(moved);\n            break;\n\n          case 'week':\n            (0, _timestamp.relativeDays)(moved, mover, _timestamp.DAYS_IN_WEEK);\n            break;\n\n          case 'day':\n            (0, _timestamp.relativeDays)(moved, mover, 1);\n            break;\n\n          case '4day':\n            (0, _timestamp.relativeDays)(moved, mover, 4);\n            break;\n\n          case 'category':\n            (0, _timestamp.relativeDays)(moved, mover, this.parsedCategoryDays);\n            break;\n        }\n      }\n\n      (0, _timestamp.updateWeekday)(moved);\n      (0, _timestamp.updateFormatted)(moved);\n      (0, _timestamp.updateRelative)(moved, this.times.now);\n\n      if (this.value instanceof Date) {\n        this.$emit('input', (0, _timestamp.timestampToDate)(moved));\n      } else if (typeof this.value === 'number') {\n        this.$emit('input', (0, _timestamp.timestampToDate)(moved).getTime());\n      } else {\n        this.$emit('input', moved.date);\n      }\n\n      this.$emit('moved', moved);\n    },\n    next: function next() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      this.move(amount);\n    },\n    prev: function prev() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      this.move(-amount);\n    },\n    timeToY: function timeToY(time) {\n      var clamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var c = this.$children[0];\n\n      if (c && c.timeToY) {\n        return c.timeToY(time, clamp);\n      } else {\n        return false;\n      }\n    },\n    timeDelta: function timeDelta(time) {\n      var c = this.$children[0];\n\n      if (c && c.timeDelta) {\n        return c.timeDelta(time);\n      } else {\n        return false;\n      }\n    },\n    minutesToPixels: function minutesToPixels(minutes) {\n      var c = this.$children[0];\n\n      if (c && c.minutesToPixels) {\n        return c.minutesToPixels(minutes);\n      } else {\n        return -1;\n      }\n    },\n    scrollToTime: function scrollToTime(time) {\n      var c = this.$children[0];\n\n      if (c && c.scrollToTime) {\n        return c.scrollToTime(time);\n      } else {\n        return false;\n      }\n    },\n    parseTimestamp: function parseTimestamp(input, required) {\n      return (0, _timestamp.parseTimestamp)(input, required, this.times.now);\n    },\n    timestampToDate: function timestampToDate(timestamp) {\n      return (0, _timestamp.timestampToDate)(timestamp);\n    },\n    getCategoryList: function getCategoryList(categories) {\n      var _this = this;\n\n      if (!this.noEvents) {\n        var categoryMap = categories.reduce(function (map, category, index) {\n          if (_typeof(category) === 'object' && category.categoryName) map[category.categoryName] = {\n            index: index,\n            count: 0\n          };else if (typeof category === 'string') map[category] = {\n            index: index,\n            count: 0\n          };\n          return map;\n        }, {});\n\n        if (!this.categoryHideDynamic || !this.categoryShowAll) {\n          var categoryLength = categories.length;\n          this.parsedEvents.forEach(function (ev) {\n            var category = ev.category;\n\n            if (typeof category !== 'string') {\n              category = _this.categoryForInvalid;\n            }\n\n            if (!category) {\n              return;\n            }\n\n            if (category in categoryMap) {\n              categoryMap[category].count++;\n            } else if (!_this.categoryHideDynamic) {\n              categoryMap[category] = {\n                index: categoryLength++,\n                count: 1\n              };\n            }\n          });\n        }\n\n        if (!this.categoryShowAll) {\n          for (var category in categoryMap) {\n            if (categoryMap[category].count === 0) {\n              delete categoryMap[category];\n            }\n          }\n        }\n\n        categories = categories.filter(function (category) {\n          if (_typeof(category) === 'object' && category.categoryName) {\n            return categoryMap.hasOwnProperty(category.categoryName);\n          } else if (typeof category === 'string') {\n            return categoryMap.hasOwnProperty(category);\n          }\n\n          return false;\n        });\n      }\n\n      return categories;\n    }\n  },\n  render: function render(h) {\n    var _this2 = this;\n\n    var _this$renderProps3 = this.renderProps,\n        start = _this$renderProps3.start,\n        end = _this$renderProps3.end,\n        maxDays = _this$renderProps3.maxDays,\n        component = _this$renderProps3.component,\n        weekdays = _this$renderProps3.weekdays,\n        categories = _this$renderProps3.categories;\n    return h(component, {\n      staticClass: 'v-calendar',\n      class: {\n        'v-calendar-events': !this.noEvents\n      },\n      props: _objectSpread(_objectSpread({}, this.$props), {}, {\n        start: start.date,\n        end: end.date,\n        maxDays: maxDays,\n        weekdays: weekdays,\n        categories: categories\n      }),\n      directives: [{\n        modifiers: {\n          quiet: true\n        },\n        name: 'resize',\n        value: this.updateEventVisibility\n      }],\n      on: _objectSpread(_objectSpread({}, this.$listeners), {}, {\n        'click:date': function clickDate(day, e) {\n          if (_this2.$listeners.input) {\n            _this2.$emit('input', day.date);\n          }\n\n          if (_this2.$listeners['click:date']) {\n            _this2.$emit('click:date', day, e);\n          }\n        }\n      }),\n      scopedSlots: this.getScopedSlots()\n    });\n  }\n});\n\nexports.default = _default;","map":{"version":3,"mappings":"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","names":["_calendarWithEvents","extend","name","props","_props","calendar","weeks","intervals","category","data","lastStart","lastEnd","computed","parsedValue","value","parsedStart","times","today","parsedCategoryDays","parseInt","categoryDays","renderProps","around","component","maxDays","weekdays","parsedWeekdays","categories","parsedCategories","start","end","type","_VCalendarMonthly","_VCalendarDaily","getStartOfWeek","getEndOfWeek","weekday","_timestamp","_VCalendarWeekly","parsedEnd","days","_VCalendarCategory","i","push","getCategoryList","Error","eventWeekdays","categoryMode","title","spanYears","year","spanMonths","month","monthShortFormatter","monthLongFormatter","getFormatter","timeZone","categoryText","watch","mounted","updateEventVisibility","checkChange","updated","window","requestAnimationFrame","methods","date","$emit","move","amount","moved","forward","mover","limit","day","now","Date","getTime","next","prev","timeToY","time","clamp","c","$children","timeDelta","minutesToPixels","minutes","scrollToTime","parseTimestamp","input","required","timestampToDate","timestamp","noEvents","categoryMap","reduce","map","index","_typeof","categoryName","count","categoryHideDynamic","categoryShowAll","categoryLength","length","parsedEvents","forEach","ev","_this","categoryForInvalid","filter","hasOwnProperty","render","h","staticClass","class","$props","directives","modifiers","quiet","on","$listeners","e","_this2","scopedSlots","getScopedSlots"],"sourceRoot":"","sources":["../../../src/components/VCalendar/VCalendar.ts"],"sourcesContent":["// Styles\n// import '../../stylus/components/_calendar-daily.styl'\n\n// Types\nimport { VNode, Component } from 'vue'\n\n// Mixins\nimport CalendarWithEvents from './mixins/calendar-with-events'\n\n// Util\nimport props from './util/props'\nimport {\n  DAYS_IN_MONTH_MAX,\n  DAY_MIN,\n  DAYS_IN_WEEK,\n  parseTimestamp,\n  validateTimestamp,\n  relativeDays,\n  nextDay,\n  prevDay,\n  copyTimestamp,\n  updateFormatted,\n  updateWeekday,\n  updateRelative,\n  getStartOfMonth,\n  getEndOfMonth,\n  VTime,\n  VTimestampInput,\n  timestampToDate,\n} from './util/timestamp'\n\n// Calendars\nimport VCalendarMonthly from './VCalendarMonthly'\nimport VCalendarDaily from './VCalendarDaily'\nimport VCalendarWeekly from './VCalendarWeekly'\nimport VCalendarCategory from './VCalendarCategory'\nimport { CalendarTimestamp, CalendarFormatter, CalendarCategory } from 'vuetify/types'\nimport { getParsedCategories } from './util/parser'\n\n// Types\ninterface VCalendarRenderProps {\n  start: CalendarTimestamp\n  end: CalendarTimestamp\n  component: string | Component\n  maxDays: number\n  weekdays: number[]\n  categories: CalendarCategory[]\n}\n\n/* @vue/component */\nexport default CalendarWithEvents.extend({\n  name: 'v-calendar',\n\n  props: {\n    ...props.calendar,\n    ...props.weeks,\n    ...props.intervals,\n    ...props.category,\n  },\n\n  data: () => ({\n    lastStart: null as CalendarTimestamp | null,\n    lastEnd: null as CalendarTimestamp | null,\n  }),\n\n  computed: {\n    parsedValue (): CalendarTimestamp {\n      return (validateTimestamp(this.value)\n        ? parseTimestamp(this.value, true)\n        : (this.parsedStart || this.times.today))\n    },\n    parsedCategoryDays (): number {\n      return parseInt(this.categoryDays) || 1\n    },\n    renderProps (): VCalendarRenderProps {\n      const around = this.parsedValue\n      let component: any = null\n      let maxDays = this.maxDays\n      let weekdays = this.parsedWeekdays\n      let categories = this.parsedCategories\n      let start = around\n      let end = around\n      switch (this.type) {\n        case 'month':\n          component = VCalendarMonthly\n          start = getStartOfMonth(around)\n          end = getEndOfMonth(around)\n          break\n        case 'week':\n          component = VCalendarDaily\n          start = this.getStartOfWeek(around)\n          end = this.getEndOfWeek(around)\n          maxDays = 7\n          break\n        case 'day':\n          component = VCalendarDaily\n          maxDays = 1\n          weekdays = [start.weekday]\n          break\n        case '4day':\n          component = VCalendarDaily\n          end = relativeDays(copyTimestamp(end), nextDay, 3)\n          updateFormatted(end)\n          maxDays = 4\n          weekdays = [\n            start.weekday,\n            (start.weekday + 1) % 7,\n            (start.weekday + 2) % 7,\n            (start.weekday + 3) % 7,\n          ]\n          break\n        case 'custom-weekly':\n          component = VCalendarWeekly\n          start = this.parsedStart || around\n          end = this.parsedEnd\n          break\n        case 'custom-daily':\n          component = VCalendarDaily\n          start = this.parsedStart || around\n          end = this.parsedEnd\n          break\n        case 'category':\n          const days = this.parsedCategoryDays\n\n          component = VCalendarCategory\n          end = relativeDays(copyTimestamp(end), nextDay, days)\n          updateFormatted(end)\n          maxDays = days\n          weekdays = []\n\n          for (let i = 0; i < days; i++) {\n            weekdays.push((start.weekday + i) % 7)\n          }\n\n          categories = this.getCategoryList(categories)\n          break\n        default:\n          throw new Error(this.type + ' is not a valid Calendar type')\n      }\n\n      return { component, start, end, maxDays, weekdays, categories }\n    },\n    eventWeekdays (): number[] {\n      return this.renderProps.weekdays\n    },\n    categoryMode (): boolean {\n      return this.type === 'category'\n    },\n    title (): string {\n      const { start, end } = this.renderProps\n      const spanYears = start.year !== end.year\n      const spanMonths = spanYears || start.month !== end.month\n\n      if (spanYears) {\n        return this.monthShortFormatter(start, true) + ' ' + start.year + ' - ' + this.monthShortFormatter(end, true) + ' ' + end.year\n      }\n\n      if (spanMonths) {\n        return this.monthShortFormatter(start, true) + ' - ' + this.monthShortFormatter(end, true) + ' ' + end.year\n      } else {\n        return this.monthLongFormatter(start, false) + ' ' + start.year\n      }\n    },\n    monthLongFormatter (): CalendarFormatter {\n      return this.getFormatter({\n        timeZone: 'UTC', month: 'long',\n      })\n    },\n    monthShortFormatter (): CalendarFormatter {\n      return this.getFormatter({\n        timeZone: 'UTC', month: 'short',\n      })\n    },\n    parsedCategories (): CalendarCategory[] {\n      return getParsedCategories(this.categories, this.categoryText)\n    },\n  },\n\n  watch: {\n    renderProps: 'checkChange',\n  },\n\n  mounted () {\n    this.updateEventVisibility()\n    this.checkChange()\n  },\n\n  updated () {\n    window.requestAnimationFrame(this.updateEventVisibility)\n  },\n\n  methods: {\n    checkChange (): void {\n      const { lastStart, lastEnd } = this\n      const { start, end } = this.renderProps\n      if (!lastStart || !lastEnd ||\n        start.date !== lastStart.date ||\n        end.date !== lastEnd.date) {\n        this.lastStart = start\n        this.lastEnd = end\n        this.$emit('change', { start, end })\n      }\n    },\n    move (amount = 1): void {\n      const moved = copyTimestamp(this.parsedValue)\n      const forward = amount > 0\n      const mover = forward ? nextDay : prevDay\n      const limit = forward ? DAYS_IN_MONTH_MAX : DAY_MIN\n      let times = forward ? amount : -amount\n\n      while (--times >= 0) {\n        switch (this.type) {\n          case 'month':\n            moved.day = limit\n            mover(moved)\n            break\n          case 'week':\n            relativeDays(moved, mover, DAYS_IN_WEEK)\n            break\n          case 'day':\n            relativeDays(moved, mover, 1)\n            break\n          case '4day':\n            relativeDays(moved, mover, 4)\n            break\n          case 'category':\n            relativeDays(moved, mover, this.parsedCategoryDays)\n            break\n        }\n      }\n\n      updateWeekday(moved)\n      updateFormatted(moved)\n      updateRelative(moved, this.times.now)\n\n      if (this.value instanceof Date) {\n        this.$emit('input', timestampToDate(moved))\n      } else if (typeof this.value === 'number') {\n        this.$emit('input', timestampToDate(moved).getTime())\n      } else {\n        this.$emit('input', moved.date)\n      }\n\n      this.$emit('moved', moved)\n    },\n    next (amount = 1): void {\n      this.move(amount)\n    },\n    prev (amount = 1): void {\n      this.move(-amount)\n    },\n    timeToY (time: VTime, clamp = true): number | false {\n      const c = this.$children[0] as any\n\n      if (c && c.timeToY) {\n        return c.timeToY(time, clamp)\n      } else {\n        return false\n      }\n    },\n    timeDelta (time: VTime): number | false {\n      const c = this.$children[0] as any\n\n      if (c && c.timeDelta) {\n        return c.timeDelta(time)\n      } else {\n        return false\n      }\n    },\n    minutesToPixels (minutes: number): number {\n      const c = this.$children[0] as any\n\n      if (c && c.minutesToPixels) {\n        return c.minutesToPixels(minutes)\n      } else {\n        return -1\n      }\n    },\n    scrollToTime (time: VTime): boolean {\n      const c = this.$children[0] as any\n\n      if (c && c.scrollToTime) {\n        return c.scrollToTime(time)\n      } else {\n        return false\n      }\n    },\n    parseTimestamp (input: VTimestampInput, required?: false): CalendarTimestamp | null {\n      return parseTimestamp(input, required, this.times.now)\n    },\n    timestampToDate (timestamp: CalendarTimestamp): Date {\n      return timestampToDate(timestamp)\n    },\n    getCategoryList (categories: CalendarCategory[]): CalendarCategory[] {\n      if (!this.noEvents) {\n        const categoryMap: any = categories.reduce((map: any, category, index) => {\n          if (typeof category === 'object' && category.categoryName) map[category.categoryName] = { index, count: 0 }\n          else if (typeof category === 'string') map[category] = { index, count: 0 }\n          return map\n        }, {})\n\n        if (!this.categoryHideDynamic || !this.categoryShowAll) {\n          let categoryLength = categories.length\n\n          this.parsedEvents.forEach(ev => {\n            let category = ev.category\n\n            if (typeof category !== 'string') {\n              category = this.categoryForInvalid\n            }\n\n            if (!category) {\n              return\n            }\n\n            if (category in categoryMap) {\n              categoryMap[category].count++\n            } else if (!this.categoryHideDynamic) {\n              categoryMap[category] = {\n                index: categoryLength++,\n                count: 1,\n              }\n            }\n          })\n        }\n\n        if (!this.categoryShowAll) {\n          for (const category in categoryMap) {\n            if (categoryMap[category].count === 0) {\n              delete categoryMap[category]\n            }\n          }\n        }\n\n        categories = categories.filter((category: CalendarCategory) => {\n          if (typeof category === 'object' && category.categoryName) {\n            return categoryMap.hasOwnProperty(category.categoryName)\n          } else if (typeof category === 'string') {\n            return categoryMap.hasOwnProperty(category)\n          }\n          return false\n        })\n      }\n      return categories\n    },\n  },\n\n  render (h): VNode {\n    const { start, end, maxDays, component, weekdays, categories } = this.renderProps\n\n    return h(component, {\n      staticClass: 'v-calendar',\n      class: {\n        'v-calendar-events': !this.noEvents,\n      },\n      props: {\n        ...this.$props,\n        start: start.date,\n        end: end.date,\n        maxDays,\n        weekdays,\n        categories,\n      },\n      directives: [{\n        modifiers: { quiet: true },\n        name: 'resize',\n        value: this.updateEventVisibility,\n      }],\n      on: {\n        ...this.$listeners,\n\n        'click:date': (day: CalendarTimestamp, e?: MouseEvent) => {\n          if (this.$listeners.input) {\n            this.$emit('input', day.date)\n          }\n          if (this.$listeners['click:date']) {\n            this.$emit('click:date', day, e)\n          }\n        },\n      },\n      scopedSlots: this.getScopedSlots(),\n    })\n  },\n})\n"]},"metadata":{},"sourceType":"script"}