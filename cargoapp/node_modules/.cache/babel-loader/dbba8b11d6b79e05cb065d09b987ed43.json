{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.regexp.test.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.number.constructor.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"../../../src/components/VTextField/VTextField.sass\");\n\nrequire(\"../../../src/components/VOtpInput/VOtpInput.sass\");\n\nvar _VInput = _interopRequireDefault(require(\"../VInput\"));\n\nvar _VTextField2 = _interopRequireDefault(require(\"../VTextField/VTextField\"));\n\nvar _ripple = _interopRequireDefault(require(\"../../directives/ripple\"));\n\nvar _helpers = require(\"../../util/helpers\");\n\nvar _console = require(\"../../util/console\");\n\nvar _mixins = _interopRequireDefault(require(\"../../util/mixins\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar baseMixins = (0, _mixins.default)(_VInput.default);\n/* @vue/component */\n\nvar _default = baseMixins.extend().extend({\n  name: 'v-otp-input',\n  directives: {\n    ripple: _ripple.default\n  },\n  inheritAttrs: false,\n  props: {\n    length: {\n      type: [Number, String],\n      default: 6\n    },\n    type: {\n      type: String,\n      default: 'text'\n    },\n    plain: Boolean\n  },\n  data: function data() {\n    return {\n      badInput: false,\n      initialValue: null,\n      isBooted: false,\n      otp: []\n    };\n  },\n  computed: {\n    outlined: function outlined() {\n      return !this.plain;\n    },\n    classes: function classes() {\n      return _objectSpread(_objectSpread(_objectSpread({}, _VInput.default.options.computed.classes.call(this)), _VTextField2.default.options.computed.classes.call(this)), {}, {\n        'v-otp-input--plain': this.plain\n      });\n    },\n    isDirty: function isDirty() {\n      return _VInput.default.options.computed.isDirty.call(this) || this.badInput;\n    }\n  },\n  watch: {\n    isFocused: 'updateValue',\n    value: function value(val) {\n      this.lazyValue = val;\n      this.otp = (val == null ? void 0 : val.split('')) || [];\n    }\n  },\n  created: function created() {\n    var _this$internalValue;\n    /* istanbul ignore next */\n\n\n    if (this.$attrs.hasOwnProperty('browser-autocomplete')) {\n      (0, _console.breaking)('browser-autocomplete', 'autocomplete', this);\n    }\n\n    this.otp = ((_this$internalValue = this.internalValue) == null ? void 0 : _this$internalValue.split('')) || [];\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    requestAnimationFrame(function () {\n      return _this.isBooted = true;\n    });\n  },\n  methods: {\n    /** @public */\n    focus: function focus(e, otpIdx) {\n      this.onFocus(e, otpIdx || 0);\n    },\n    genInputSlot: function genInputSlot(otpIdx) {\n      var _this2 = this;\n\n      return this.$createElement('div', this.setBackgroundColor(this.backgroundColor, {\n        staticClass: 'v-input__slot',\n        style: {\n          height: (0, _helpers.convertToUnit)(this.height)\n        },\n        on: {\n          click: function click() {\n            return _this2.onClick(otpIdx);\n          },\n          mousedown: function mousedown(e) {\n            return _this2.onMouseDown(e, otpIdx);\n          },\n          mouseup: function mouseup(e) {\n            return _this2.onMouseUp(e, otpIdx);\n          }\n        }\n      }), [this.genDefaultSlot(otpIdx)]);\n    },\n    genControl: function genControl(otpIdx) {\n      return this.$createElement('div', {\n        staticClass: 'v-input__control'\n      }, [this.genInputSlot(otpIdx)]);\n    },\n    genDefaultSlot: function genDefaultSlot(otpIdx) {\n      return [this.genFieldset(), this.genTextFieldSlot(otpIdx)];\n    },\n    genContent: function genContent() {\n      var _this3 = this;\n\n      return Array.from({\n        length: +this.length\n      }, function (_, i) {\n        return _this3.$createElement('div', _this3.setTextColor(_this3.validationState, {\n          staticClass: 'v-input',\n          class: _this3.classes\n        }), [_this3.genControl(i)]);\n      });\n    },\n    genFieldset: function genFieldset() {\n      return this.$createElement('fieldset', {\n        attrs: {\n          'aria-hidden': true\n        }\n      }, [this.genLegend()]);\n    },\n    genLegend: function genLegend() {\n      var span = this.$createElement('span', {\n        domProps: {\n          innerHTML: '&#8203;'\n        }\n      });\n      return this.$createElement('legend', {\n        style: {\n          width: '0px'\n        }\n      }, [span]);\n    },\n    genInput: function genInput(otpIdx) {\n      var _this4 = this;\n\n      var listeners = Object.assign({}, this.listeners$);\n      delete listeners.change; // Change should not be bound externally\n\n      return this.$createElement('input', {\n        style: {},\n        domProps: {\n          value: this.otp[otpIdx],\n          min: this.type === 'number' ? 0 : null\n        },\n        attrs: _objectSpread(_objectSpread({}, this.attrs$), {}, {\n          disabled: this.isDisabled,\n          readonly: this.isReadonly,\n          type: this.type,\n          id: \"\".concat(this.computedId, \"--\").concat(otpIdx),\n          class: \"otp-field-box--\".concat(otpIdx),\n          maxlength: 1\n        }),\n        on: Object.assign(listeners, {\n          blur: this.onBlur,\n          input: function input(e) {\n            return _this4.onInput(e, otpIdx);\n          },\n          focus: function focus(e) {\n            return _this4.onFocus(e, otpIdx);\n          },\n          paste: function paste(e) {\n            return _this4.onPaste(e, otpIdx);\n          },\n          keydown: this.onKeyDown,\n          keyup: function keyup(e) {\n            return _this4.onKeyUp(e, otpIdx);\n          }\n        }),\n        ref: 'input',\n        refInFor: true\n      });\n    },\n    genTextFieldSlot: function genTextFieldSlot(otpIdx) {\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__slot'\n      }, [this.genInput(otpIdx)]);\n    },\n    onBlur: function onBlur(e) {\n      var _this5 = this;\n\n      this.isFocused = false;\n      e && this.$nextTick(function () {\n        return _this5.$emit('blur', e);\n      });\n    },\n    onClick: function onClick(otpIdx) {\n      if (this.isFocused || this.isDisabled || !this.$refs.input[otpIdx]) return;\n      this.onFocus(undefined, otpIdx);\n    },\n    onFocus: function onFocus(e, otpIdx) {\n      e == null ? void 0 : e.preventDefault();\n      e == null ? void 0 : e.stopPropagation();\n      var elements = this.$refs.input;\n      var ref = this.$refs.input && elements[otpIdx || 0];\n      if (!ref) return;\n\n      if (document.activeElement !== ref) {\n        ref.focus();\n        return ref.select();\n      }\n\n      if (!this.isFocused) {\n        this.isFocused = true;\n        ref.select();\n        e && this.$emit('focus', e);\n      }\n    },\n    onInput: function onInput(e, otpIdx) {\n      var _this6 = this;\n\n      var target = e.target;\n      var value = target.value;\n      this.applyValue(otpIdx, target.value, function () {\n        _this6.internalValue = _this6.otp.join('');\n      });\n      this.badInput = target.validity && target.validity.badInput;\n      var nextIndex = otpIdx + 1;\n\n      if (value) {\n        if (nextIndex < +this.length) {\n          this.changeFocus(nextIndex);\n        } else {\n          this.clearFocus(otpIdx);\n          this.onCompleted();\n        }\n      }\n    },\n    clearFocus: function clearFocus(index) {\n      var input = this.$refs.input[index];\n      input.blur();\n    },\n    onKeyDown: function onKeyDown(e) {\n      if (e.keyCode === _helpers.keyCodes.enter) {\n        this.$emit('change', this.internalValue);\n      }\n\n      this.$emit('keydown', e);\n    },\n    onMouseDown: function onMouseDown(e, otpIdx) {\n      // Prevent input from being blurred\n      if (e.target !== this.$refs.input[otpIdx]) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      _VInput.default.options.methods.onMouseDown.call(this, e);\n    },\n    onMouseUp: function onMouseUp(e, otpIdx) {\n      if (this.hasMouseDown) this.focus(e, otpIdx);\n\n      _VInput.default.options.methods.onMouseUp.call(this, e);\n    },\n    onPaste: function onPaste(event, index) {\n      var _event$clipboardData;\n\n      var maxCursor = +this.length - 1;\n      var inputVal = event == null ? void 0 : (_event$clipboardData = event.clipboardData) == null ? void 0 : _event$clipboardData.getData('Text');\n      var inputDataArray = (inputVal == null ? void 0 : inputVal.split('')) || [];\n      event.preventDefault();\n\n      var newOtp = _toConsumableArray(this.otp);\n\n      for (var i = 0; i < inputDataArray.length; i++) {\n        var appIdx = index + i;\n        if (appIdx > maxCursor) break;\n        newOtp[appIdx] = inputDataArray[i].toString();\n      }\n\n      this.otp = newOtp;\n      this.internalValue = this.otp.join('');\n      var targetFocus = Math.min(index + inputDataArray.length, maxCursor);\n      this.changeFocus(targetFocus);\n\n      if (newOtp.length === +this.length) {\n        this.onCompleted();\n        this.clearFocus(targetFocus);\n      }\n    },\n    applyValue: function applyValue(index, inputVal, next) {\n      var newOtp = _toConsumableArray(this.otp);\n\n      newOtp[index] = inputVal;\n      this.otp = newOtp;\n      next();\n    },\n    changeFocus: function changeFocus(index) {\n      this.onFocus(undefined, index || 0);\n    },\n    updateValue: function updateValue(val) {\n      // Sets validationState from validatable\n      this.hasColor = val;\n\n      if (val) {\n        this.initialValue = this.lazyValue;\n      } else if (this.initialValue !== this.lazyValue) {\n        this.$emit('change', this.lazyValue);\n      }\n    },\n    onKeyUp: function onKeyUp(event, index) {\n      event.preventDefault();\n      var eventKey = event.key;\n\n      if (['Tab', 'Shift', 'Meta', 'Control', 'Alt'].includes(eventKey)) {\n        return;\n      }\n\n      if (['Delete'].includes(eventKey)) {\n        return;\n      }\n\n      if (eventKey === 'ArrowLeft' || eventKey === 'Backspace' && !this.otp[index]) {\n        return index > 0 && this.changeFocus(index - 1);\n      }\n\n      if (eventKey === 'ArrowRight') {\n        return index + 1 < +this.length && this.changeFocus(index + 1);\n      }\n    },\n    onCompleted: function onCompleted() {\n      var rsp = this.otp.join('');\n\n      if (rsp.length === +this.length) {\n        this.$emit('finish', rsp);\n      }\n    }\n  },\n  render: function render(h) {\n    return h('div', {\n      staticClass: 'v-otp-input',\n      class: this.themeClasses\n    }, this.genContent());\n  }\n});\n\nexports.default = _default;","map":{"version":3,"mappings":"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","names":["require","baseMixins","_VInput","extend","name","directives","ripple","_ripple","inheritAttrs","props","length","type","Number","String","default","plain","Boolean","data","badInput","initialValue","isBooted","otp","computed","outlined","classes","options","call","_VTextField2","isDirty","watch","isFocused","value","val","lazyValue","split","created","$attrs","hasOwnProperty","internalValue","mounted","requestAnimationFrame","_this","methods","focus","e","otpIdx","onFocus","genInputSlot","$createElement","setBackgroundColor","backgroundColor","staticClass","style","height","on","click","_this2","onClick","mousedown","onMouseDown","mouseup","onMouseUp","genDefaultSlot","genControl","genFieldset","genTextFieldSlot","genContent","Array","from","_","i","_this3","setTextColor","validationState","class","attrs","genLegend","span","domProps","innerHTML","width","genInput","listeners","Object","assign","listeners$","change","min","attrs$","disabled","isDisabled","readonly","isReadonly","id","computedId","maxlength","blur","onBlur","input","_this4","onInput","paste","onPaste","keydown","onKeyDown","keyup","onKeyUp","ref","refInFor","$nextTick","_this5","$emit","$refs","undefined","preventDefault","stopPropagation","elements","document","activeElement","select","target","applyValue","_this6","join","validity","nextIndex","changeFocus","clearFocus","onCompleted","index","keyCode","_helpers","enter","hasMouseDown","event","maxCursor","inputVal","clipboardData","_event$clipboardData","getData","inputDataArray","newOtp","appIdx","toString","targetFocus","Math","next","updateValue","hasColor","eventKey","key","includes","rsp","render","h","themeClasses"],"sourceRoot":"","sources":["../../../src/components/VOtpInput/VOtpInput.ts"],"sourcesContent":["// Styles\nimport '../VTextField/VTextField.sass'\nimport './VOtpInput.sass'\n\n// Extensions\nimport VInput from '../VInput'\nimport VTextField from '../VTextField/VTextField'\n// Directives\nimport ripple from '../../directives/ripple'\n\n// Utilities\nimport { convertToUnit, keyCodes } from '../../util/helpers'\nimport { breaking } from '../../util/console'\n\n// Types\nimport mixins from '../../util/mixins'\nimport { VNode } from 'vue'\n\nconst baseMixins = mixins(\n  VInput,\n)\n\ninterface options extends InstanceType<typeof baseMixins> {\n  $refs: {\n    input: HTMLInputElement[]\n  }\n}\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-otp-input',\n\n  directives: {\n    ripple,\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    length: {\n      type: [Number, String],\n      default: 6,\n    },\n    type: {\n      type: String,\n      default: 'text',\n    },\n    plain: Boolean,\n  },\n\n  data: () => ({\n    badInput: false,\n    initialValue: null,\n    isBooted: false,\n    otp: [] as string[],\n  }),\n\n  computed: {\n    outlined (): Boolean {\n      return !this.plain\n    },\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        ...VTextField.options.computed.classes.call(this),\n        'v-otp-input--plain': this.plain,\n      }\n    },\n    isDirty (): boolean {\n      return VInput.options.computed.isDirty.call(this) || this.badInput\n    },\n  },\n\n  watch: {\n    isFocused: 'updateValue',\n    value (val) {\n      this.lazyValue = val\n      this.otp = val?.split('') || []\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('browser-autocomplete')) {\n      breaking('browser-autocomplete', 'autocomplete', this)\n    }\n\n    this.otp = this.internalValue?.split('') || []\n  },\n\n  mounted () {\n    requestAnimationFrame(() => (this.isBooted = true))\n  },\n\n  methods: {\n    /** @public */\n    focus (e: Event, otpIdx: number) {\n      this.onFocus(e, otpIdx || 0)\n    },\n    genInputSlot (otpIdx: number) {\n      return this.$createElement('div', this.setBackgroundColor(this.backgroundColor, {\n        staticClass: 'v-input__slot',\n        style: { height: convertToUnit(this.height) },\n        on: {\n          click: () => this.onClick(otpIdx),\n          mousedown: (e: Event) => this.onMouseDown(e, otpIdx),\n          mouseup: (e: Event) => this.onMouseUp(e, otpIdx),\n        },\n      }), [this.genDefaultSlot(otpIdx)])\n    },\n    genControl (otpIdx: number) {\n      return this.$createElement('div', {\n        staticClass: 'v-input__control',\n      }, [\n        this.genInputSlot(otpIdx),\n      ])\n    },\n    genDefaultSlot (otpIdx: number) {\n      return [\n        this.genFieldset(),\n        this.genTextFieldSlot(otpIdx),\n      ]\n    },\n    genContent () {\n      return Array.from({ length: +this.length }, (_, i) => {\n        return this.$createElement('div', this.setTextColor(this.validationState, {\n          staticClass: 'v-input',\n          class: this.classes,\n        }), [this.genControl(i)])\n      })\n    },\n    genFieldset () {\n      return this.$createElement('fieldset', {\n        attrs: {\n          'aria-hidden': true,\n        },\n      }, [this.genLegend()])\n    },\n    genLegend () {\n      const span = this.$createElement('span', {\n        domProps: { innerHTML: '&#8203;' },\n      })\n\n      return this.$createElement('legend', {\n        style: {\n          width: '0px',\n        },\n      }, [span])\n    },\n    genInput (otpIdx: number) {\n      const listeners = Object.assign({}, this.listeners$)\n      delete listeners.change // Change should not be bound externally\n\n      return this.$createElement('input', {\n        style: {},\n        domProps: {\n          value: this.otp[otpIdx],\n          min: this.type === 'number' ? 0 : null,\n        },\n        attrs: {\n          ...this.attrs$,\n          disabled: this.isDisabled,\n          readonly: this.isReadonly,\n          type: this.type,\n          id: `${this.computedId}--${otpIdx}`,\n          class: `otp-field-box--${otpIdx}`,\n          maxlength: 1,\n        },\n        on: Object.assign(listeners, {\n          blur: this.onBlur,\n          input: (e: Event) => this.onInput(e, otpIdx),\n          focus: (e: Event) => this.onFocus(e, otpIdx),\n          paste: (e: ClipboardEvent) => this.onPaste(e, otpIdx),\n          keydown: this.onKeyDown,\n          keyup: (e: KeyboardEvent) => this.onKeyUp(e, otpIdx),\n        }),\n        ref: 'input',\n        refInFor: true,\n      })\n    },\n    genTextFieldSlot (otpIdx: number): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__slot',\n      }, [\n        this.genInput(otpIdx),\n      ])\n    },\n    onBlur (e?: Event) {\n      this.isFocused = false\n      e && this.$nextTick(() => this.$emit('blur', e))\n    },\n    onClick (otpIdx: number) {\n      if (this.isFocused || this.isDisabled || !this.$refs.input[otpIdx]) return\n\n      this.onFocus(undefined, otpIdx)\n    },\n    onFocus (e?: Event, otpIdx?: number) {\n      e?.preventDefault()\n      e?.stopPropagation()\n      const elements = this.$refs.input as HTMLInputElement[]\n      const ref = this.$refs.input && elements[otpIdx || 0]\n      if (!ref) return\n\n      if (document.activeElement !== ref) {\n        ref.focus()\n        return ref.select()\n      }\n\n      if (!this.isFocused) {\n        this.isFocused = true\n        ref.select()\n        e && this.$emit('focus', e)\n      }\n    },\n    onInput (e: Event, otpIdx: number) {\n      const target = e.target as HTMLInputElement\n      const value = target.value\n      this.applyValue(otpIdx, target.value, () => {\n        this.internalValue = this.otp.join('')\n      })\n      this.badInput = target.validity && target.validity.badInput\n\n      const nextIndex = otpIdx + 1\n      if (value) {\n        if (nextIndex < +this.length) {\n          this.changeFocus(nextIndex)\n        } else {\n          this.clearFocus(otpIdx)\n          this.onCompleted()\n        }\n      }\n    },\n    clearFocus (index: number) {\n      const input = this.$refs.input[index] as HTMLInputElement\n      input.blur()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      if (e.keyCode === keyCodes.enter) {\n        this.$emit('change', this.internalValue)\n      }\n\n      this.$emit('keydown', e)\n    },\n    onMouseDown (e: Event, otpIdx: number) {\n      // Prevent input from being blurred\n      if (e.target !== this.$refs.input[otpIdx]) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n\n      VInput.options.methods.onMouseDown.call(this, e)\n    },\n    onMouseUp (e: Event, otpIdx: number) {\n      if (this.hasMouseDown) this.focus(e, otpIdx)\n\n      VInput.options.methods.onMouseUp.call(this, e)\n    },\n    onPaste (event: ClipboardEvent, index: number) {\n      const maxCursor = +this.length - 1\n      const inputVal = event?.clipboardData?.getData('Text')\n      const inputDataArray = inputVal?.split('') || []\n      event.preventDefault()\n      const newOtp: string[] = [...this.otp]\n      for (let i = 0; i < inputDataArray.length; i++) {\n        const appIdx = index + i\n        if (appIdx > maxCursor) break\n        newOtp[appIdx] = inputDataArray[i].toString()\n      }\n      this.otp = newOtp\n      this.internalValue = this.otp.join('')\n      const targetFocus = Math.min(index + inputDataArray.length, maxCursor)\n      this.changeFocus(targetFocus)\n\n      if (newOtp.length === +this.length) { this.onCompleted(); this.clearFocus(targetFocus) }\n    },\n    applyValue (index: number, inputVal: string, next: Function) {\n      const newOtp: string[] = [...this.otp]\n      newOtp[index] = inputVal\n      this.otp = newOtp\n      next()\n    },\n    changeFocus (index: number) {\n      this.onFocus(undefined, index || 0)\n    },\n    updateValue (val: boolean) {\n      // Sets validationState from validatable\n      this.hasColor = val\n\n      if (val) {\n        this.initialValue = this.lazyValue\n      } else if (this.initialValue !== this.lazyValue) {\n        this.$emit('change', this.lazyValue)\n      }\n    },\n    onKeyUp (event: KeyboardEvent, index: number) {\n      event.preventDefault()\n      const eventKey = event.key\n      if (['Tab', 'Shift', 'Meta', 'Control', 'Alt'].includes(eventKey)) {\n        return\n      }\n      if (['Delete'].includes(eventKey)) {\n        return\n      }\n      if (eventKey === 'ArrowLeft' || (eventKey === 'Backspace' && !this.otp[index])) {\n        return index > 0 && this.changeFocus(index - 1)\n      }\n      if (eventKey === 'ArrowRight') {\n        return index + 1 < +this.length && this.changeFocus(index + 1)\n      }\n    },\n    onCompleted () {\n      const rsp = this.otp.join('')\n      if (rsp.length === +this.length) {\n        this.$emit('finish', rsp)\n      }\n    },\n  },\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-otp-input',\n      class: this.themeClasses,\n    }, this.genContent())\n  },\n})\n"]},"metadata":{},"sourceType":"script"}